import{j as e,r as m,u as N}from"./app-DIRHZcXc.js";import{I as b}from"./InputError-D7XI8PRa.js";import{I as S}from"./InputLabel-ZJOyoG-y.js";import{M as k,S as U}from"./SecondaryButton-DUmPWorN.js";import{T as H}from"./TextInput-A6K9FNwa.js";import{C as c}from"./index.esm-BertO21V.js";import{S as r}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{c as V}from"./cil-user-follow-9sfVD_63.js";import"./transition-1BCu1bU3.js";var u=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"];function d({className:i="",disabled:s,children:t,...o}){return e.jsx("button",{...o,className:`w-100 text-center items-center rounded-md border border-transparent bg-danger bg-hover px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:bg-red-700 dark:focus:ring-offset-gray-800 ${s&&"opacity-25"} `+i,disabled:s,children:t})}function A({className:i=""}){const[s,t]=m.useState(!1),o=m.useRef(),{data:f,setData:x,delete:h,processing:g,post:v,reset:l,errors:y,clearErrors:j}=N({password:""}),w=()=>{t(!0)},C=n=>{n.preventDefault(),r.fire({title:"Opération en cours ...",text:"Veuillez patienter quelque instant",allowOutsideClick:!1,didOpen:()=>{r.showLoading()}}),h(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>{a(),r.fire({icon:"error",title:"Opération éffectuée avec succès",text:"Compte supprimé avec succès!"}),v("logout")},onError:p=>{console.log(p),r.close(),r.fire({icon:"error",title:"Opération échouée",text:`${p.exception??"Une erreure est survenue au cours de la suppression du compte! Réessayer."}`}),o.current.focus()},onFinish:()=>l()})},a=()=>{t(!1),j(),l()};return e.jsxs("section",{className:`space-y-6 ${i}`,children:[e.jsxs("header",{children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[e.jsx(c,{className:"text-danger",icon:V})," Suppression de compte"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Une fois votre compte supprimé, toutes ses ressources et données seront définitivement supprimées. Avant de supprimer votre compte, veuillez télécharger toutes les données ou informations que vous souhaitez conserver."})]}),e.jsxs(d,{onClick:w,children:[e.jsx(c,{icon:u})," Supprimer le compte"]}),e.jsx(k,{show:s,onClose:a,children:e.jsxs("form",{onSubmit:C,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Êtes-vous sûr de vouloir supprimer votre compte ?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Une fois votre compte supprimé, toutes ses ressources et données seront définitivement supprimées. Veuillez saisir votre mot de passe pour confirmer que vous souhaitez supprimer définitivement votre compte."}),e.jsxs("div",{className:"mt-6",children:[e.jsx(S,{htmlFor:"password",value:"Password",className:"sr-only"}),e.jsx(H,{id:"password",type:"password",name:"password",ref:o,value:f.password,onChange:n=>x("password",n.target.value),className:"mt-1 block w-3/4",isFocused:!0,placeholder:"Password"}),e.jsx(b,{message:y.password,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(U,{onClick:a,children:"Abandonner"}),e.jsxs(d,{className:"ms-3",disabled:g,children:[e.jsx(c,{icon:u}),"  Supprimer"]})]})]})})]})}export{A as default};
