import{r as l,u as S,j as e}from"./app-Bujc9X5Y.js";import{D as m,c as p}from"./DangerButton-CNOc5uIe.js";import{T as C,I as U}from"./InputError-GnACu-3c.js";import{I as k}from"./InputLabel-BoA81_pw.js";import{M as D,S as I}from"./SecondaryButton-gAtAzIRs.js";import{C as o}from"./index.esm-DDtwaT9x.js";import{S as s}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{c as F}from"./cil-user-follow-9sfVD_63.js";import"./transition-C-9Rq4Bg.js";function B({className:u=""}){const[d,a]=l.useState(!1),i=l.useRef(),{data:x,setData:f,delete:h,processing:v,post:g,reset:n,errors:j,clearErrors:w}=S({password:""}),y=()=>{a(!0)},N=t=>{t.preventDefault(),s.fire({title:"Opération en cours ...",text:"Veuillez patienter quelque instant",allowOutsideClick:!1,didOpen:()=>{s.showLoading()}}),h(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>{r(),s.fire({icon:"error",title:"Opération éffectuée avec succès",text:"Compte supprimé avec succès!"}),g("logout")},onError:c=>{console.log(c),s.close(),s.fire({icon:"error",title:"Opération échouée",text:`${c.exception??"Une erreure est survenue au cours de la suppression du compte! Réessayer."}`}),i.current.focus()},onFinish:()=>n()})},r=()=>{a(!1),w(),n()};return e.jsxs("section",{className:`space-y-6 ${u}`,children:[e.jsxs("header",{children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[e.jsx(o,{className:"text-danger",icon:F})," Suppression de compte"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Une fois votre compte supprimé, toutes ses ressources et données seront définitivement supprimées. Avant de supprimer votre compte, veuillez télécharger toutes les données ou informations que vous souhaitez conserver."})]}),e.jsxs(m,{onClick:y,children:[e.jsx(o,{icon:p})," Supprimer le compte"]}),e.jsx(D,{show:d,onClose:r,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Êtes-vous sûr de vouloir supprimer votre compte ?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Une fois votre compte supprimé, toutes ses ressources et données seront définitivement supprimées. Veuillez saisir votre mot de passe pour confirmer que vous souhaitez supprimer définitivement votre compte."}),e.jsxs("div",{className:"mt-6",children:[e.jsx(k,{htmlFor:"password",value:"Password",className:"sr-only"}),e.jsx(C,{id:"password",type:"password",name:"password",ref:i,value:x.password,onChange:t=>f("password",t.target.value),className:"mt-1 block w-3/4",isFocused:!0,placeholder:"Password"}),e.jsx(U,{message:j.password,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(I,{onClick:r,children:"Abandonner"}),e.jsxs(m,{className:"ms-3",disabled:v,children:[e.jsx(o,{icon:p}),"  Supprimer"]})]})]})})]})}export{B as default};
