import{u as V,r as m,a as q,j as e,H,L as h}from"./app-Bwf3cHVx.js";import{A as R,c as U}from"./AuthenticatedLayout-CHKFWp_o.js";import{C as o}from"./index.esm-Dyj8B7MT.js";import{S as t}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{M as N,S as y}from"./SecondaryButton-xsClXUQ9.js";import{I as w}from"./InputLabel-DNl5-h17.js";import{T as v}from"./TextInput-DSFEw9or.js";import{I as k}from"./InputError-sQjJn0PK.js";import{P as C}from"./PrimaryButton-BvB29NGw.js";import{c as G}from"./cil-library-add-Cbli5Ji_.js";import{c as S}from"./cil-cloud-download-CPU_poQw.js";import{c as W}from"./cil-menu-Za6MY1fF.js";import{c as I}from"./cil-pencil-m516yCOw.js";import{c as X}from"./cil-delete-tImhsUUb.js";import{c as L}from"./cil-send-haInf9fd.js";import{c as J}from"./cil-info-CmGCY32x.js";import"./transition-DrrDhga9.js";import"./ApplicationLogo-oVY2-wrM.js";import"./logo-CPzApIsd.js";function fe({apprenants:M}){const E=V().props.auth.permissions,[A,n]=m.useState(!1),[O,l]=m.useState(!1),[d,x]=m.useState(null),i=s=>E.some(r=>r.name==s),P=(s,r)=>{s.preventDefault(),t.fire({text:`Profile de : ${r.parent?.firstname} - ${r.parent?.lastname}`,imageUrl:r.photo,imageWidth:400,imageHeight:200,imageAlt:"Photo de profil",confirmButtonColor:"#1b5a38",confirmButtonText:"Merci"})},B=(s,r)=>{s.preventDefault(),x(r),l(!0)},D=(s,r)=>{s.preventDefault(),x(r),n(!0)},p=()=>{n(!1)},u=()=>{l(!1)},{data:f,setData:j,errors:g,processing:c,post:b,patch:K,delete:T}=q({photo:"",apprenants:""}),_=s=>{s.preventDefault(),t.fire({title:"OpÃ©ration en cours...",text:"Veuillez patienter pendant que nous traitons vos donnÃ©es.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),b(route("apprenant.import"),{onSuccess:()=>{t.close(),t.fire({icon:"success",title:"OpÃ©ration rÃ©ussie",text:"Importation effectuÃ©e avec succÃ¨s"}),n(!1)},onError:r=>{t.close(),t.fire({icon:"error",title:"OpÃ©ration Ã©chouÃ©e",text:`${r.exception??"Veuillez vÃ©rifier vos informations et rÃ©essayer."}`}),n(!1)}})},z=s=>{s.preventDefault(),t.fire({title:"OpÃ©ration en cours...",text:"Veuillez patienter pendant que nous traitons vos donnÃ©es.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),b(route("apprenant.profile-update",d?.id),{forceFormData:!0,onSuccess:()=>{t.close(),t.fire({icon:"success",title:"OpÃ©ration rÃ©ussie",text:"Profile mis Ã  jour avec succÃ¨s"}),l(!1),console.log("Success",f.photo)},onError:r=>{t.close(),t.fire({icon:"error",title:"OpÃ©ration Ã©chouÃ©e",text:`${r.exception??"Veuillez vÃ©rifier vos informations et rÃ©essayer."}`}),l(!1),console.log("Error",f.photo)}})},$=(s,r)=>{s.preventDefault(),t.fire({title:'<span style="color: #facc15;">âš ï¸ ÃŠtes-vous sÃ»r ?</span>',text:"L'apprenant sera supprimÃ© de faÃ§on permanente !",showCancelButton:!0,confirmButtonColor:"#2a7348",cancelButtonColor:"#3085d6",confirmButtonText:"ğŸ˜‡ Oui, supprimer !",cancelButtonText:"Annuler"}).then(a=>{a.isConfirmed&&(t.fire({title:'<span style="color: #facc15;">ğŸ«  Suppression en cours...</span>',text:"Veuillez patienter pendant que nous traitons vos donnÃ©es.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),T(route("apprenant.destroy",r.id),{onSuccess:()=>{t.close(),t.fire({title:'<span style="color: #2a7348;">ğŸ‘ŒSuppression rÃ©ussie </span>',text:"L'apprenant a Ã©tÃ© supprimÃ© avec succÃ¨s.",confirmButtonText:"ğŸ˜‡ Fermer"})},onError:F=>{t.close(),t.fire({title:'<span style="color: #facc15;">ğŸ¤¦â€â™‚ï¸ Suppression Ã©chouÃ©e </span>',text:`${F.exception??"Veuillez rÃ©essayer."}`,confirmButtonText:"ğŸ˜‡ Fermer"})}}))})};return e.jsxs(R,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx(o,{className:"text-success",icon:U})," Panel des listes d'apprenants"]}),children:[e.jsx(H,{title:"Les apprenants"}),e.jsx("div",{className:"row py-12 justify-content-center",children:e.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:e.jsxs("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",style:{overflowX:"auto"},children:[i("apprenant.create")?e.jsxs("div",{className:"  items-center gap-4",children:[e.jsxs(h,{className:"mx-2 btn btn-sm bg-success bg-hover text-white",href:route("apprenant.create"),children:[" ",e.jsx(o,{className:"",icon:G})," Ajouter"]}),e.jsxs("button",{className:"btn btn-sm bg-success bg-hover text-white",onClick:s=>D(s),children:[" ",e.jsx(o,{className:"",icon:S})," Importer des apprenants"]})]}):null,e.jsxs("table",{className:"table table-striped",id:"myTable",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"NÂ°"}),e.jsx("th",{scope:"col",children:"Action"}),e.jsx("th",{scope:"col",children:"Photo"}),e.jsx("th",{scope:"col",children:"Ecole"}),e.jsx("th",{scope:"col",children:"Nom"}),e.jsx("th",{scope:"col",children:"PrÃ©nom"}),e.jsx("th",{scope:"col",children:"Parent"}),e.jsx("th",{scope:"col",children:"Classe"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Adresse"}),e.jsx("th",{scope:"col",children:"Phone"}),e.jsx("th",{scope:"col",children:"Sexe"}),e.jsx("th",{scope:"col",children:"Date de naissance"}),e.jsx("th",{scope:"col",children:"Lieu de naissance"}),e.jsx("th",{scope:"col",children:"NÂ° Educ Master"})]})}),e.jsx("tbody",{children:M.data.map((s,r)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:r+1}),e.jsx("td",{children:e.jsxs("div",{className:"dropstart",children:[e.jsxs("button",{type:"button",className:"dropdown-toggle items-center rounded-md border border-transparent bg-white px-3 py-2 text-sm font-medium leading-4 text-gray-500 transition duration-150 ease-in-out hover:text-gray-700 focus:outline-none dark:bg-gray-800 dark:text-gray-400 dark:hover:text-gray-300","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx(o,{icon:W})," GÃ©rer"]}),e.jsxs("ul",{className:"dropdown-menu p-2 border rounded shadow","aria-labelledby":"dropdownMenuButton1",children:[i("apprenant.edit")?e.jsx("li",{children:e.jsxs(h,{className:"btn text-warning",href:route("apprenant.edit",s.id),children:[e.jsx(o,{icon:I}),"  Modifier"]})}):null,i("apprenant.delete")?e.jsx("li",{children:e.jsxs(h,{className:"btn text-danger",onClick:a=>$(a,s),children:[e.jsx(o,{icon:X}),"  Supprimer"]})}):null]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"badge bg-light d-flex rounded border shadow",children:[e.jsx("img",{src:s.photo,onClick:a=>P(a,s),className:"img-fluid img-circle shadow",srcSet:"",style:{width:"50px",height:"50px",borderRadius:"50%",border:"solid 5px #f6f6f6",cursor:"pointer"}}),i("apprenant.edit")?e.jsx(o,{className:"text-success",style:{cursor:"pointer",width:500},icon:I,onClick:a=>B(a,s)}):"---"]})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border text-dark border",children:s.school?.raison_sociale})}),e.jsx("td",{children:s.firstname}),e.jsx("td",{children:s.lastname}),e.jsxs("td",{children:[s.parent?.firstname," ",s.parent?.lastname]}),e.jsxs("td",{children:[s.classe?.libelle||"--"," - ",s.serie?.libelle||"--"," "]}),e.jsx("td",{children:s.email||"--"}),e.jsx("td",{children:s.adresse||"--"}),e.jsx("td",{children:s.phone||"--"}),e.jsx("td",{children:s.sexe||"--"}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.date_naissance||"--"})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.lieu_naissance||"--"})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.educ_master||"--"})})]},s.id))})]})]})})}),e.jsx(N,{show:O,onClose:u,children:e.jsxs("form",{onSubmit:z,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:["Modifier le profil de l'apprenant ",e.jsx("em",{className:"text-success",children:`${d?.firstname} - ${d?.lastname}`})]}),e.jsxs("div",{className:"my-2",children:[e.jsxs(w,{htmlFor:"photo",value:"Les apprenants en fichier excel",children:[" ",e.jsx("span",{className:"text-danger",children:"*"}),"  "]}),e.jsx(v,{type:"file",name:"photo",id:"photo",required:!0,className:"form-control mt-1 block w-full",onChange:s=>j("photo",s.target.files[0])}),e.jsx(k,{className:"mt-2",message:g.photo})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(y,{onClick:u,children:"Abandonner"}),e.jsxs(C,{disabled:c,children:[e.jsx(o,{icon:L})," ",c?"Enregistrement ...":"Enregistrer les modifications"]})]})]})}),e.jsx(N,{show:A,onClose:p,children:e.jsxs("form",{onSubmit:_,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:["Importation de nouveaux ",e.jsx("em",{className:"text-success",children:"apprenants"})]}),e.jsxs("div",{className:"alert alert-success",children:[e.jsx(o,{className:"text-success",icon:J}),e.jsxs("ul",{className:"",children:[e.jsx("li",{className:"",children:"TÃ©lecharger le modÃ¨le"}),e.jsx("li",{className:"",children:"Remplissez le modÃ¨le"}),e.jsx("li",{className:"",children:"Uploader le fichier remplit"})]})]}),e.jsx("div",{className:"my-2",children:e.jsxs("a",{target:"_blank",href:"/apprenants-model.xlsx",className:"w-100 text-white btn btn-sm bg-success btn-hover",children:[e.jsx(o,{icon:S}),"TÃ©lÃ©charger le modÃ¨le"]})}),e.jsxs("div",{className:"my-2",children:[e.jsxs(w,{htmlFor:"apprenants",value:"Les apprenants en fichier excel",children:[" ",e.jsx("span",{className:"text-danger",children:"*"}),"  "]}),e.jsx(v,{type:"file",name:"apprenants",id:"apprenants",required:!0,className:"form-control mt-1 block w-full",onChange:s=>j("apprenants",s.target.files[0])}),e.jsx(k,{className:"mt-2",message:g.apprenants})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(y,{onClick:p,children:"Abandonner"}),e.jsxs(C,{disabled:c,children:[e.jsx(o,{icon:L})," ",c?"Enregistrement ...":"Enregistrer les modifications"]})]})]})})]})}export{fe as default};
