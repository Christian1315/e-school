import{u as c,r as g,a as b,j as e,H as N}from"./app-BafNAIy_.js";import{A as y,c as w}from"./AuthenticatedLayout-BDXIbZtz.js";import{C as r}from"./index.esm-DkR7PTAf.js";import{S as t}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{M as v,S as P}from"./SecondaryButton-Vev1ZqtL.js";import{I as C}from"./InputLabel-BwoVa4oW.js";import{P as k}from"./PrimaryButton-A09BBNwJ.js";import{T as I}from"./TextInput-Bbrn-w2S.js";import{I as S}from"./InputError--1l39_4m.js";import{c as E}from"./cil-center-focus-Dy_g8s2j.js";import{c as L}from"./cil-info-CmGCY32x.js";import{c as M}from"./cil-cloud-download-CPU_poQw.js";import{c as T}from"./cil-send-haInf9fd.js";import"./transition-CUxLL-8O.js";import"./ApplicationLogo-cAOi-xSx.js";import"./logo-CPzApIsd.js";function K({users:n}){c().props.auth.user,c().props.auth.permissions;const[d,a]=g.useState(!1),o=()=>{a(!1)},m=s=>{t.fire({text:`Profile de : ${s.firstname} - ${s.lastname}`,imageUrl:s.detail?.profile_img,imageWidth:400,imageHeight:200,imageAlt:"Photo de profile",confirmButtonColor:"#1b5a38",confirmButtonText:"Merci"})},{data:O,setData:h,errors:x,processing:i,post:p}=b({parents:""}),f=s=>{s.preventDefault(),t.fire({title:"Opération en cours...",text:"Veuillez patienter pendant que nous traitons vos données.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),p(route("parent.import"),{onSuccess:()=>{t.close(),t.fire({icon:"success",title:"Opération réussie",text:"Importation effectuée avec succès"}),a(!1)},onError:l=>{t.close(),t.fire({icon:"error",title:"Opération échouée",text:`${l.exception??"Veuillez vérifier vos informations et réessayer."}`}),a(!1)}})};return e.jsxs(y,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx(r,{className:"text-success",icon:w})," Panel des professeurs"]}),children:[e.jsx(N,{title:"Les Parents"}),e.jsx("div",{className:"row py-12 justify-content-center",children:e.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:e.jsx("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",style:{overflowX:"auto"},children:e.jsxs("table",{className:"table table-striped",id:"myTable",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"N°"}),e.jsx("th",{scope:"col",children:"Profile"}),e.jsx("th",{scope:"col",children:"Ecole"}),e.jsx("th",{scope:"col",children:"Nom"}),e.jsx("th",{scope:"col",children:"Prénom"}),e.jsx("th",{scope:"col",children:"Email/Phone"}),e.jsx("th",{scope:"col",children:"Rôles"})]})}),e.jsx("tbody",{children:n.data.map((s,l)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:l+1}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-light border bg-hover shadow-sm",onClick:()=>m(s),children:e.jsx(r,{icon:E})})}),e.jsx("td",{children:s.school?.raison_sociale||"---"}),e.jsx("td",{children:s.firstname}),e.jsx("td",{children:s.lastname}),e.jsxs("td",{children:[s.email,"/",s.detail?.phone||"---"]}),e.jsx("td",{className:"text-center",children:s.roles?.length>0?s.roles.map((j,u)=>e.jsx("span",{className:"m-1 badge bg-light text-dark border rounded",children:j.name},u)):"---"})]},s.id))})]})})})}),e.jsx(v,{show:d,onClose:o,children:e.jsxs("form",{onSubmit:f,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:["Importation de nouveaux  ",e.jsx("em",{className:"text-success",children:" parents "})]}),e.jsxs("p",{className:"alert alert-success",children:[e.jsx(r,{className:"text-success",icon:L}),e.jsxs("ol",{className:"",children:[e.jsx("li",{className:"",children:"Télecharger le modèle"}),e.jsx("li",{className:"",children:"Remplissez le modèle"}),e.jsx("li",{className:"",children:"Uploader le fichier remplit"})]})]}),e.jsx("div",{className:"my-2",children:e.jsxs("a",{target:"_blank",href:"/parents-model.xlsx",className:"w-100 text-white btn btn-sm bg-success btn-hover",children:[e.jsx(r,{icon:M}),"Télécharger le modèle"]})}),e.jsxs("div",{className:"my-2",children:[e.jsxs(C,{htmlFor:"parents",value:"Les parents en fichier excel",children:[" ",e.jsx("span",{className:"text-danger",children:"*"}),"  "]}),e.jsx(I,{type:"file",name:"parents",id:"parents",required:!0,className:"form-control mt-1 block w-full",onChange:s=>h("parents",s.target.files[0])}),e.jsx(S,{className:"mt-2",message:x.parents})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(P,{onClick:o,children:"Abandonner"}),e.jsxs(k,{disabled:i,children:[e.jsx(r,{icon:T})," ",i?"Enregistrement ...":"Enregistrer les modifications"]})]})]})})]})}export{K as default};
