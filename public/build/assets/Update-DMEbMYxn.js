import{u as N,a as _,j as a,H as w,L as $}from"./app-BafNAIy_.js";import{A as y}from"./AuthenticatedLayout-BDXIbZtz.js";import{P as C}from"./PrimaryButton-A09BBNwJ.js";import{I as n}from"./InputLabel-BwoVa4oW.js";import{T as L}from"./TextInput-Bbrn-w2S.js";import{I as o}from"./InputError--1l39_4m.js";import{C as m}from"./index.esm-DkR7PTAf.js";import{S as r}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{S as d}from"./react-select.esm-GYeh1PLQ.js";import{c as k}from"./cil-arrow-circle-left-Bp7VjLH0.js";import{c as S}from"./cil-send-haInf9fd.js";import{c as I}from"./cil-pencil-m516yCOw.js";import"./transition-CUxLL-8O.js";import"./ApplicationLogo-cAOi-xSx.js";import"./logo-CPzApIsd.js";function Q({schools:u,apprenants:p,trimestres:h,matieres:x,interrogation:s}){const v=N().props.auth.permissions,f=e=>v.some(c=>c.name==e),{data:l,setData:t,errors:i,put:q,patch:g,processing:j,progress:F}=_({school_id:s.school_id||"",apprenant_id:s.apprenant_id||"",trimestre_id:s.trimestre_id||"",matiere_id:s.matiere_id||"",note:s.note||""}),b=e=>{e.preventDefault(),r.fire({title:"Opération en cours...",text:"Veuillez patienter pendant que nous traitons vos données.",allowOutsideClick:!1,didOpen:()=>{r.showLoading()}}),g(route("interrogation.update",s.id),{onSuccess:()=>{r.close(),r.fire({icon:"success",title:"Opération réussie",text:"Interrogation mise à jour avec succès"})},onError:c=>{r.close(),r.fire({icon:"error",title:"Opération échouée",text:`${c.exception??"Veuillez vérifier vos informations et réessayer."}`}),console.log(c)}})};return a.jsxs(y,{header:a.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[a.jsx(m,{className:"text-success",icon:I})," Modification de l'interrogation de l'apprenant ",a.jsx("span",{className:"badge bg-light border rounded text-success",children:`${s.apprenant?.firstname} - ${s.apprenant?.lastname}`})]}),children:[a.jsx(w,{title:"Ajouter une classe"}),a.jsx("div",{className:"row py-12 justify-content-center",children:a.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:a.jsx("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",children:a.jsxs("div",{className:"bg-light p-3 rounded border mb-5",children:[f("interrogation.view")?a.jsx("div",{className:" text-center  items-center gap-4",children:a.jsxs($,{className:"btn btn-sm bg-success bg-hover text-white",href:route("interrogation.index"),children:[" ",a.jsx(m,{icon:k})," Liste des intérrogations"]})}):null,a.jsxs("form",{onSubmit:b,className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs(n,{htmlFor:"school_id",value:"L'école concernée",children:["  ",a.jsx("span",{className:"text-danger",children:"*"})," "]}),a.jsx(d,{placeholder:"Rechercher une école ...",name:"school_id",id:"school_id",required:!0,className:"form-control mt-1 block w-full",options:u.data.map(e=>({value:e.id,label:`${e.raison_sociale}`})),value:u.data.map(e=>({value:e.id,label:`${e.raison_sociale}`})).find(e=>e.value===l.school_id),onChange:e=>t("school_id",e.value)}),a.jsx(o,{className:"mt-2",message:i.school_id})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs(n,{htmlFor:"apprenant_id",value:"L'apprenant concerné",children:["  ",a.jsx("span",{className:"text-danger",children:"*"})," "]}),a.jsx(d,{placeholder:"Rechercher un apprenant ...",name:"apprenant_id",id:"apprenant_id",required:!0,className:"form-control mt-1 block w-full",options:p.data.map(e=>({value:e.id,label:`${e.firstname} - ${e.lastname}`})),value:p.data.map(e=>({value:e.id,label:`${e.firstname} - ${e.lastname}`})).find(e=>e.value===l.apprenant_id),onChange:e=>t("apprenant_id",e.value)}),a.jsx(o,{className:"mt-2",message:i.apprenant_id})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs(n,{htmlFor:"trimestre_id",value:"Le trimestre concerné",children:["  ",a.jsx("span",{className:"text-danger",children:"*"})," "]}),a.jsx(d,{placeholder:"Rechercher un trimestre ...",name:"trimestre_id",id:"trimestre_id",required:!0,className:"form-control mt-1 block w-full",options:h.data.map(e=>({value:e.id,label:`${e.libelle}`})),value:h.data.map(e=>({value:e.id,label:`${e.libelle}`})).find(e=>e.value===l.trimestre_id),onChange:e=>t("trimestre_id",e.value)}),a.jsx(o,{className:"mt-2",message:i.trimestre_id})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs(n,{htmlFor:"matiere_id",value:"La matière concernée",children:["  ",a.jsx("span",{className:"text-danger",children:"*"})," "]}),a.jsx(d,{placeholder:"Rechercher une matière ...",name:"matiere_id",id:"matiere_id",required:!0,className:"form-control mt-1 block w-full",options:x.data.map(e=>({value:e.id,label:`${e.libelle}`})),value:x.data.map(e=>({value:e.id,label:`${e.libelle}`})).find(e=>e.value===l.matiere_id),onChange:e=>t("matiere_id",e.value)}),a.jsx(o,{className:"mt-2",message:i.matiere_id})]})})]}),a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs(n,{htmlFor:"note",value:"Note",children:[" ",a.jsx("span",{className:"text-danger",children:"*"})," "]}),a.jsx(L,{id:"note",type:"number",className:"mt-1 block w-full",value:l.note,placeholder:"18.00",onChange:e=>t("note",e.target.value),autoComplete:"note",required:!0}),a.jsx(o,{className:"mt-2",message:i.note})]})}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(C,{disabled:j,children:[" ",a.jsx(m,{icon:S})," ",j?"Enregistrement ...":"Enregistrer"," "]})})]})]})})})})]})}export{Q as default};
