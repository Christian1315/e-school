import{R as x,r as d,u as ne,a as ie,j as c,H as re,L as ae}from"./app-BV_AbIos.js";import{A as oe}from"./AuthenticatedLayout-Cuqmfs-q.js";import{P as se}from"./PrimaryButton-B-Jw41pc.js";import{I as T}from"./InputLabel-tg0Kx8O1.js";import{T as W}from"./TextInput-DYqvODmS.js";import{I as O}from"./InputError-D8Gl_fgR.js";import{C as I}from"./index.esm-Cxx6n6zM.js";import{S as C}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{_ as le,a as X,b as E,c as ue,m as ce,d as de,e as V,f as v,g as k,S as q}from"./react-select.esm-21HK5Us-.js";import{R as _}from"./transition-l__3hoP4.js";import{c as pe}from"./cil-arrow-circle-left-Bp7VjLH0.js";import{c as me}from"./cil-send-haInf9fd.js";import{c as fe}from"./cil-pencil-m516yCOw.js";import"./ApplicationLogo-BFx-UpCH.js";import"./logo-CPzApIsd.js";function H(s,i){s.prototype=Object.create(i.prototype),s.prototype.constructor=s,le(s,i)}const z={disabled:!1},w=x.createContext(null);var he=function(i){return i.scrollTop},y="unmounted",g="exited",b="entering",j="entered",A="exiting",h=(function(s){H(i,s);function i(a,t){var e;e=s.call(this,a,t)||this;var n=t,o=n&&!n.isMounting?a.enter:a.appear,u;return e.appearStatus=null,a.in?o?(u=g,e.appearStatus=b):u=j:a.unmountOnExit||a.mountOnEnter?u=y:u=g,e.state={status:u},e.nextCallback=null,e}i.getDerivedStateFromProps=function(t,e){var n=t.in;return n&&e.status===y?{status:g}:null};var r=i.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==b&&n!==j&&(e=b):(n===b||n===j)&&(e=A)}this.updateStatus(!1,e)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var t=this.props.timeout,e,n,o;return e=n=o=t,t!=null&&typeof t!="number"&&(e=t.exit,n=t.enter,o=t.appear!==void 0?t.appear:n),{exit:e,enter:n,appear:o}},r.updateStatus=function(t,e){if(t===void 0&&(t=!1),e!==null)if(this.cancelNextCallback(),e===b){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:_.findDOMNode(this);n&&he(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:y})},r.performEnter=function(t){var e=this,n=this.props.enter,o=this.context?this.context.isMounting:t,u=this.props.nodeRef?[o]:[_.findDOMNode(this),o],p=u[0],f=u[1],l=this.getTimeouts(),m=o?l.appear:l.enter;if(!t&&!n||z.disabled){this.safeSetState({status:j},function(){e.props.onEntered(p)});return}this.props.onEnter(p,f),this.safeSetState({status:b},function(){e.props.onEntering(p,f),e.onTransitionEnd(m,function(){e.safeSetState({status:j},function(){e.props.onEntered(p,f)})})})},r.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:_.findDOMNode(this);if(!e||z.disabled){this.safeSetState({status:g},function(){t.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:A},function(){t.props.onExiting(o),t.onTransitionEnd(n.exit,function(){t.safeSetState({status:g},function(){t.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},r.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,e.nextCallback=null,t(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:_.findDOMNode(this),o=t==null&&!this.props.addEndListener;if(!n||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],p=u[0],f=u[1];this.props.addEndListener(p,f)}t!=null&&setTimeout(this.nextCallback,t)},r.render=function(){var t=this.state.status;if(t===y)return null;var e=this.props,n=e.children;e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef;var o=X(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return x.createElement(w.Provider,{value:null},typeof n=="function"?n(t,o):x.cloneElement(x.Children.only(n),o))},i})(x.Component);h.contextType=w;h.propTypes={};function N(){}h.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:N,onEntering:N,onEntered:N,onExit:N,onExiting:N,onExited:N};h.UNMOUNTED=y;h.EXITED=g;h.ENTERING=b;h.ENTERED=j;h.EXITING=A;function F(s,i){var r=function(e){return i&&d.isValidElement(e)?i(e):e},a=Object.create(null);return s&&d.Children.map(s,function(t){return t}).forEach(function(t){a[t.key]=r(t)}),a}function ve(s,i){s=s||{},i=i||{};function r(f){return f in i?i[f]:s[f]}var a=Object.create(null),t=[];for(var e in s)e in i?t.length&&(a[e]=t,t=[]):t.push(e);var n,o={};for(var u in i){if(a[u])for(n=0;n<a[u].length;n++){var p=a[u][n];o[a[u][n]]=r(p)}o[u]=r(u)}for(n=0;n<t.length;n++)o[t[n]]=r(t[n]);return o}function S(s,i,r){return r[i]!=null?r[i]:s.props[i]}function xe(s,i){return F(s.children,function(r){return d.cloneElement(r,{onExited:i.bind(null,r),in:!0,appear:S(r,"appear",s),enter:S(r,"enter",s),exit:S(r,"exit",s)})})}function Ee(s,i,r){var a=F(s.children),t=ve(i,a);return Object.keys(t).forEach(function(e){var n=t[e];if(d.isValidElement(n)){var o=e in i,u=e in a,p=i[e],f=d.isValidElement(p)&&!p.props.in;u&&(!o||f)?t[e]=d.cloneElement(n,{onExited:r.bind(null,n),in:!0,exit:S(n,"exit",s),enter:S(n,"enter",s)}):!u&&o&&!f?t[e]=d.cloneElement(n,{in:!1}):u&&o&&d.isValidElement(p)&&(t[e]=d.cloneElement(n,{onExited:r.bind(null,n),in:p.props.in,exit:S(n,"exit",s),enter:S(n,"enter",s)}))}}),t}var ge=Object.values||function(s){return Object.keys(s).map(function(i){return s[i]})},be={component:"div",childFactory:function(i){return i}},R=(function(s){H(i,s);function i(a,t){var e;e=s.call(this,a,t)||this;var n=e.handleExited.bind(ue(e));return e.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},e}var r=i.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(t,e){var n=e.children,o=e.handleExited,u=e.firstRender;return{children:u?xe(t,o):Ee(t,n,o),firstRender:!1}},r.handleExited=function(t,e){var n=F(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState(function(o){var u=E({},o.children);return delete u[t.key],{children:u}}))},r.render=function(){var t=this.props,e=t.component,n=t.childFactory,o=X(t,["component","childFactory"]),u=this.state.contextValue,p=ge(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,e===null?x.createElement(w.Provider,{value:u},p):x.createElement(w.Provider,{value:u},x.createElement(e,o,p))},i})(x.Component);R.propTypes={};R.defaultProps=be;var Se=["in","onExited","appear","enter","exit"],Ce=function(i){return function(r){r.in,r.onExited,r.appear,r.enter,r.exit;var a=V(r,Se);return d.createElement(i,a)}},Ne=Ce,je=["component","duration","in","onExited"],B=function(i){var r=i.component,a=i.duration,t=a===void 0?1:a,e=i.in;i.onExited;var n=V(i,je),o=d.useRef(null),u={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(t,"ms")},exiting:{opacity:0},exited:{opacity:0}};return d.createElement(h,{mountOnEnter:!0,unmountOnExit:!0,in:e,timeout:t,nodeRef:o},function(p){var f={style:v({},u[p]),ref:o};return d.createElement(r,E({innerProps:f},n))})},D=260,Ve=function(i){var r=i.children,a=i.in,t=i.onExited,e=d.useRef(null),n=d.useState("auto"),o=k(n,2),u=o[0],p=o[1];d.useEffect(function(){var l=e.current;if(l){var m=window.requestAnimationFrame(function(){return p(l.getBoundingClientRect().width)});return function(){return window.cancelAnimationFrame(m)}}},[]);var f=function(m){switch(m){default:return{width:u};case"exiting":return{width:0,transition:"width ".concat(D,"ms ease-out")};case"exited":return{width:0}}};return d.createElement(h,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:a,onExited:function(){var m=e.current;m&&t?.(m)},timeout:D,nodeRef:e},function(l){return d.createElement("div",{ref:e,style:v({overflow:"hidden",whiteSpace:"nowrap"},f(l))},r)})},Me=["in","onExited"],ye=function(i){return function(r){var a=r.in,t=r.onExited,e=V(r,Me);return d.createElement(Ve,{in:a,onExited:t},d.createElement(i,E({cropWithEllipsis:a},e)))}},Pe=ye,Te=function(i){return function(r){return d.createElement(B,E({component:i,duration:r.isMulti?D:1},r))}},Oe=Te,_e=function(i){return function(r){return d.createElement(B,E({component:i},r))}},we=_e,Re=["component"],Ie=["children"],ke=function(i){return function(r){return r.isMulti?d.createElement(Ae,E({component:i},r)):d.createElement(R,E({component:i},r))}},Ae=function(i){var r=i.component,a=V(i,Re),t=De(a);return d.createElement(R,E({component:r},t))},De=function(i){var r=i.children,a=V(i,Ie),t=a.isMulti,e=a.hasValue,n=a.innerProps,o=a.selectProps,u=o.components,p=o.controlShouldRenderValue,f=d.useState(t&&p&&e),l=k(f,2),m=l[0],L=l[1],Q=d.useState(!1),$=k(Q,2),U=$[0],G=$[1];d.useEffect(function(){e&&!m&&L(!0)},[e,m]),d.useEffect(function(){U&&!e&&m&&L(!1),G(!1)},[U,e,m]);var Y=function(){return G(!0)},Z=function(M){if(t&&d.isValidElement(M)){if(M.type===u.MultiValue)return d.cloneElement(M,{onExited:Y});if(M.type===u.Placeholder&&m)return null}return M},K=v(v({},n),{},{style:v(v({},n?.style),{},{display:t&&e||m?"flex":"grid"})}),ee=v(v({},a),{},{innerProps:K,children:d.Children.toArray(r).map(Z)});return ee},Fe=ke,Le=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],J=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=de({components:i}),a=r.Input,t=r.MultiValue,e=r.Placeholder,n=r.SingleValue,o=r.ValueContainer,u=V(r,Le);return v({Input:Ne(a),MultiValue:Pe(t),Placeholder:Oe(e),SingleValue:we(n),ValueContainer:Fe(o)},u)},P=J();P.Input;P.MultiValue;P.Placeholder;P.SingleValue;P.ValueContainer;var $e=ce(J);const Ue=$e();function it({professeurs:s,classe:i,schools:r}){const a=ne().props.auth.permissions,t=l=>a.some(m=>m.name==l),{data:e,setData:n,errors:o,patch:u,processing:p}=ie({school_id:i.school_id||"",professeur_id:i.professeurs.map(l=>l.id)||"",libelle:i.libelle||"",classe_id:i.classe_id||"",scolarite:i.scolarite||0}),f=l=>{l.preventDefault(),C.fire({title:"Opération en cours...",text:"Veuillez patienter pendant que nous traitons vos données.",allowOutsideClick:!1,didOpen:()=>{C.showLoading()}}),u(route("classe.update",i.id),{onSuccess:()=>{C.close(),C.fire({icon:"success",title:"Opération réussie",text:"Classe mise à jour avec succès"})},onError:m=>{C.close(),C.fire({icon:"error",title:"Opération échouée",text:`${m.exception??"Veuillez vérifier vos informations et réessayer."}`}),console.log(m)}})};return c.jsxs(oe,{header:c.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[c.jsx(I,{className:"text-success",icon:fe})," Modification de la classe : ",c.jsx("span",{className:"badge bg-light border rounded text-success shadow",children:i.libelle})]}),children:[c.jsx(re,{title:"Modifier une classe"}),c.jsx("div",{className:"row py-12 justify-content-center",children:c.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:c.jsx("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",children:c.jsxs("div",{className:"bg-light p-3 rounded border mb-5",children:[t("classe.view")?c.jsx("div",{className:" text-center  items-center gap-4",children:c.jsxs(ae,{className:"btn btn-sm bg-success bg-hover text-white",href:route("classe.index"),children:[" ",c.jsx(I,{icon:pe})," Liste des écoles"]})}):null,c.jsxs("form",{onSubmit:f,className:"mt-6 space-y-6",children:[c.jsxs("div",{className:"row",children:[c.jsxs("div",{className:"col-md-6",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs(T,{htmlFor:"school_id",value:"L'école concernée",children:["  ",c.jsx("span",{className:"text-danger",children:"*"})," "]}),c.jsx(q,{placeholder:"Rechercher une école ...",name:"school_id",id:"school_id",required:!0,className:"form-control mt-1 block w-full",options:r.map(l=>({value:l.id,label:`${l.raison_sociale}`})),value:r.map(l=>({value:l.id,label:`${l.raison_sociale}`})).find(l=>l.value===e.school_id),onChange:l=>n("school_id",l.value)}),c.jsx(O,{className:"mt-2",message:o.school_id})]}),c.jsxs("div",{className:"mb-3",children:[c.jsxs(T,{htmlFor:"scolarite",value:"Scolarite",children:[" ",c.jsx("span",{className:"text-danger",children:"*"})," "]}),c.jsx(W,{id:"scolarite",type:"number",className:"mt-1 block w-full",value:e.scolarite,placeholder:"500.000",onChange:l=>n("scolarite",l.target.value),autoComplete:"scolarite",required:!0}),c.jsx(O,{className:"mt-2",message:o.scolarite})]})]}),c.jsxs("div",{className:"col-md-6",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs(T,{htmlFor:"libelle",value:"Libelle de la classe",children:[" ",c.jsx("span",{className:"text-danger",children:"*"})," "]}),c.jsx(W,{id:"libelle",className:"mt-1 block w-full",value:e.libelle,placeholder:"Ex: Tle (Terminale)",onChange:l=>n("libelle",l.target.value),autoComplete:"libelle",required:!0}),c.jsx(O,{className:"mt-2",message:o.libelle})]}),c.jsxs("div",{className:"mb-3",children:[c.jsxs(T,{htmlFor:"school_id",value:"Les professeurs concerné(e)s",children:["  ",c.jsx("span",{className:"text-danger",children:"*"})," "]}),c.jsx(q,{closeMenuOnSelect:!1,components:Ue,isMulti:!0,placeholder:"Rechercher un professeur ...",name:"professeur_id",id:"professeur_id[]",required:!0,className:"form-control mt-1 block w-full",options:s.map(l=>({value:l.id,label:`${l.lastname} - ${l.firstname}`})),value:s.map(l=>({value:l.id,label:`${l.lastname} - ${l.firstname}`})).filter(l=>e.professeur_id?.includes(l.value)),onChange:l=>n("professeur_id",l.map(m=>m.value))}),c.jsx(O,{className:"mt-2",message:o.professeur_id})]})]})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs(se,{disabled:p,children:[" ",c.jsx(I,{icon:me})," ",p?"Enregistrement ...":"Enregistrer"," "]})})]})]})})})})]})}export{it as default};
